# Права доступа к файлам и папкам в Linux
Вы уже видели, как система отображает права доступа, в выводе команды `ls -l`, которая показывает содержимое директории
![[Pasted image 20240718111221.png]]
Первые 10 символов содержат информацию о правах к файлу или каталогу.

| `-`<br><br>тип файла | `rw-`<br><br>права пользователя-владельца | `r--`<br><br>права пользователей группы-владельца | `r--`<br><br>права всех остальных пользователей |
| -------------------- | ----------------------------------------- | ------------------------------------------------- | ----------------------------------------------- |
Далее идёт имя пользователя-владельца и группы -владельца.

| `root`<br><br>файл принадлежит пользователю `root` | `root`<br><br>файл принадлежит группе `root` |
| -------------------------------------------------- | -------------------------------------------- |
Соответственно, для каждой категории указывается, какие операции с файлом ей доступны: **чтение (r)**, **запись (w)** или **выполнение (x)** — для исполняемых файлов.

Для директорий параметры те же, но обозначают немного другое: **просмотр директории (r)**, **создание папок / файлов (w)** внутри директории, **переход в директорию (x)**.

Каждый из этих уровней доступа можно выразить в восьмеричной системе с помощью числового значения: *4 (r), 2 (w), 1 (x)*. Вот так мы и получаем общую схему прав:
![[Pasted image 20240718112944.png]]Для отображения уровня прав помимо формата `rwxrwxrwx` используется упомянутый восьмеричный формат. Для этого достаточно сложить все уровни прав по категориям:
`rwxrwxrwx = (4+2+1), (4+2+1), (4+2+1) = 777`

## Смена владельца файла или директории
Для смены владельца доступны два инструмента. Первый — `chown`, позволяет изменить пользователя и группу файла или папки: 
`chown [новый пользователь]:[новая группа] [файл или папка]`

Если не указывать группу, изменится только пользователь-владелец. Если не указывать пользователя (`:[новая группа]`), изменится только группа-владелец.

При изменении прав на директории можно использовать параметр `-R`. Он рекурсивно изменит владельца всех вложенных директорий и файлов. Представим, что нам нужно предоставить права на папку `new-user` для одноимённого пользователя и его группы. Команда для этого будет выглядеть так:`chown -R new-user:new-group /home/users/new-user`

Второй инструмент — `chgrp`. От слова change group. В отличие от первого, меняет только группу-владельца: `chgrp [группа] [файл или папка]` Как и chown, может работать рекурсивно с помощью ключа `-R`.

## Смена владельца файла или директории
Для работы непосредственно с правами используется команда `chmod`
``chmod [настройки прав] [файл или папка]``
Настройки прав в `chmod` можно определять двумя способами:
1. Указав категорию (`u` — пользователь-владелец, `g` — группа-владелец, `o` — другие пользователи, `a` — все пользователи), модификатор (`+`, `-` , `=`) и, соответственно, нужные права (`r`, `w`, `x`).
Например, представим, что у нас есть файл `example.txt` с максимальным уровнем прав для всех категорий пользователей:
![[Pasted image 20240718114632.png]]Допустим, мы не хотим, чтобы кто-то в принципе мог запускать этот файл на выполнение. В таком случае нам нужно убрать параметр `«x»` из прав всех категорий пользователей сразу. Это можно сделать так:
`chmod a-x example.txt`![[Pasted image 20240718114810.png]]
Представим, что потом мы решили вернуть владельцу права на запуск файла. То есть нам нужно добавить параметр `«x»` в категорию пользователя-владельца:
`chmod u+x example.txt`
![[Pasted image 20240718114848.png]]Если вдруг мы захотим изменить весь набор параметров для отдельной категории разом, это будет выглядеть следующим образом:
`chmod u=rwx example.txt`
2. Указав права в виде числового значения. Возможно, это не так прозрачно, но зато быстрее. В качестве параметра нам нужно передать это самое цифровое выражение уровня прав:
` chmod 777 example.txt` 

Соответственно, для изменения уровня прав отдельной категории пользователей нужно изменить только это числовое значение. Например, запретим исполнение файла для всех пользователей:
`chmod 666 example.txt`

А потом вернём, но только пользователю-владельцу:
`chmod 766 example.txt`
